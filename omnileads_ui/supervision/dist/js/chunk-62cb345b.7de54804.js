(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62cb345b"],{"159b":function(e,t,n){var a=n("da84"),i=n("fdbc"),r=n("785a"),c=n("17c2"),s=n("9112"),l=function(e){if(e&&e.forEach!==c)try{s(e,"forEach",c)}catch(t){e.forEach=c}};for(var o in i)i[o]&&l(a[o]&&a[o].prototype);l(r)},"17c2":function(e,t,n){"use strict";var a=n("b727").forEach,i=n("a640"),r=i("forEach");e.exports=r?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"46c8":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),i={class:"card"},r={class:"p-fluid p-formgrid p-grid"},c={class:"p-field p-sm-12 p-md-6 p-lg-6 p-xl-6"},s={class:"p-sm-12 p-md-6 p-lg-6 p-xl-6"},l=Object(a["j"])("hr",null,null,-1),o={class:"p-grid"},u={class:"p-sm-12 p-md-12 p-lg-12 p-xl-12"},d={class:"p-d-flex p-jc-between p-ai-center"};function p(e,t,n,p,g,b){var f=Object(a["E"])("AddAgents"),m=Object(a["E"])("AddGroupAgents"),_=Object(a["E"])("Button"),h=Object(a["E"])("AgentsCampaignTable"),j=Object(a["F"])("tooltip");return Object(a["y"])(),Object(a["i"])("div",i,[Object(a["j"])("h1",null,Object(a["I"])(e.$t("campaign_info",{name:e.campaign["nombre"]})),1),Object(a["j"])("div",r,[Object(a["j"])("div",c,[Object(a["j"])("h2",null,Object(a["I"])(e.$tc("agent",2)),1),Object(a["m"])(f)]),Object(a["j"])("div",s,[Object(a["j"])("h2",null,Object(a["I"])(e.$tc("group",2)),1),Object(a["m"])(m)])]),l,Object(a["j"])("div",o,[Object(a["j"])("div",u,[Object(a["j"])("div",d,[Object(a["j"])("div",null,[Object(a["j"])("h2",null,Object(a["I"])(e.$t("agents_campaign")),1)]),Object(a["j"])("div",null,[Object(a["P"])(Object(a["m"])(_,{class:"p-mr-2 p-button-raised p-button-rounded p-button-info",label:e.$t("penalty"),icon:"pi pi-info-circle"},null,8,["label"]),[[j,e.$t("pages.add_agents_to_campaign.how_to_edit_penalty"),void 0,{left:!0}]]),Object(a["m"])(_,{type:"button",label:e.$t("actions.save"),icon:"pi pi-save",class:"p-button",onClick:t[0]||(t[0]=function(e){return b.updateAgents()})},null,8,["label"])])]),Object(a["m"])(h)])])])}var g=n("1da1");n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n("96cf"),n("d81d");var _=n("5502"),h={class:"p-field p-col-12 p-md-8"},j={class:"p-field p-col-12 p-md-3"};function O(e,t,n,i,r,c){var s=Object(a["E"])("Dropdown"),l=Object(a["E"])("Button");return Object(a["y"])(),Object(a["i"])("div",null,[Object(a["j"])("div",h,[Object(a["m"])(s,{modelValue:r.selectedAgent,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.selectedAgent=e}),options:r.agents,optionLabel:"agent",placeholder:e.$tc("select_a",1,{field:e.$tc("agent",1)}),filter:!0,filterPlaceholder:e.$t("find_by",{field:e.$t("name")})},null,8,["modelValue","options","placeholder","filterPlaceholder"])]),Object(a["j"])("div",j,[Object(a["m"])(l,{type:"button",label:e.$t("actions.add"),class:"p-button-outlined",onClick:c.addAgent},null,8,["label","onClick"])])])}n("7db0");var v=n("6ba0");function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";return{title:e,text:t,icon:n,timer:5e3,showConfirmButton:!1,showCloseButton:!0,backdrop:!1,position:"top-end",toast:!0}}var $={data:function(){return{selectedAgent:null,active_agents:[],agents:[]}},created:function(){this.agentsCampaignService=new v["a"]},methods:m({addAgent:function(){if(this.selectedAgent){var e=this.selectedAgent["value"];if(this.agents_by_campaign.find((function(t){return e==t["agent_id"]})))this.$swal(w(this.$t("sweet_alert.title.warning"),this.$t("pages.add_agents_to_campaign.already_agent_in_campaign"),this.$t("sweet_alert.icons.warning")));else{var t=this.active_agents.find((function(t){return e==t["agent_id"]}));this.addAgentToCampaign(t),this.selectedAgent=null,this.$swal(w(this.$t("sweet_alert.title.success"),this.$t("pages.add_agents_to_campaign.agent_added_success"),this.$t("sweet_alert.icons.success")))}}else this.$swal(w(this.$t("sweet_alert.title.warning"),this.$t("pages.add_agents_to_campaign.not_select_type",{type:this.$t("agent")}),this.$t("sweet_alert.icons.warning")))}},Object(_["b"])(["addAgentToCampaign"])),mounted:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.agentsCampaignService.getActiveAgents();case 2:return n=t.sent,a=n.active_agents,t.next=6,a;case 6:return e.active_agents=t.sent,t.next=9,e.active_agents.map((function(e){return{agent:e["agent_full_name"],value:e["agent_id"]}}));case 9:e.agents=t.sent;case 10:case"end":return t.stop()}}),t)})))()},computed:m({},Object(_["c"])(["agents_by_campaign"]))},y=n("6b0d"),A=n.n(y);const C=A()($,[["render",O]]);var x=C,k={class:"p-field p-col-12 p-md-8"},P={class:"p-field p-col-12 p-md-3"};function E(e,t,n,i,r,c){var s=Object(a["E"])("Dropdown"),l=Object(a["E"])("Button");return Object(a["y"])(),Object(a["i"])("div",null,[Object(a["j"])("div",k,[Object(a["m"])(s,{modelValue:r.selectedGroup,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.selectedGroup=e}),options:r.groupsSelectize,optionLabel:"group",placeholder:e.$tc("select_a",1,{field:e.$tc("group",1)}),filter:!0,filterPlaceholder:e.$t("find_by",{field:e.$t("name")})},null,8,["modelValue","options","placeholder","filterPlaceholder"])]),Object(a["j"])("div",P,[Object(a["m"])(l,{type:"button",label:e.$t("actions.add"),class:"p-button-outlined",onClick:c.addGroup},null,8,["label","onClick"])])])}n("a15b"),n("b0c0");var S={data:function(){return{groupsSelectize:[],selectedGroup:null,groups:[]}},created:function(){this.agentsCampaignService=new v["a"]},methods:m({addGroup:function(){var e=this;if(this.selectedGroup){var t=this.selectedGroup["value"],n=this.groups.find((function(e){return t==e["group"]["id"]})),a=[];n["agents"].forEach((function(t){e.agents_by_campaign.find((function(e){return e["agent_id"]==t["agent_id"]}))?a.push(t["agent_username"]):e.addAgentToCampaign(t)})),this.selectedGroup=null,a.length>0?this.$swal(w(this.$t("sweet_alert.title.warning"),this.$t("pages.add_agents_to_campaign.already_agents_in_campaign",{agents:a.join(" - ")}),this.$t("sweet_alert.icons.warning"))):this.$swal(w(this.$t("sweet_alert.title.success"),this.$t("pages.add_agents_to_campaign.group_added_success"),this.$t("sweet_alert.icons.success")))}else this.$swal(w(this.$t("sweet_alert.title.warning"),this.$t("pages.add_agents_to_campaign.not_select_type",{type:this.$t("group")}),this.$t("sweet_alert.icons.warning")))}},Object(_["b"])(["addAgentToCampaign"])),mounted:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.agentsCampaignService.getActiveAgentsByGroup();case 2:return n=t.sent,a=n.groups,t.next=6,a;case 6:return e.groups=t.sent,t.next=9,e.groups.map((function(e){return{group:e["group"]["name"],value:e["group"]["id"]}}));case 9:e.groupsSelectize=t.sent;case 10:case"end":return t.stop()}}),t)})))()},computed:m({},Object(_["c"])(["agents_by_campaign"]))};const V=A()(S,[["render",E]]);var B=V,G={class:"card"},T={class:"p-d-flex p-jc-between"},D={class:"p-input-icon-left"},F=Object(a["j"])("i",{class:"pi pi-search"},null,-1),R={class:"p-d-flex p-jc-center"};function I(e,t,n,i,r,c){var s=Object(a["E"])("Button"),l=Object(a["E"])("InputText"),o=Object(a["E"])("Column"),u=Object(a["E"])("Dropdown"),d=Object(a["E"])("DataTable"),p=Object(a["F"])("tooltip");return Object(a["y"])(),Object(a["i"])("div",G,[Object(a["m"])(d,{value:e.agents_by_campaign,class:"p-datatable-sm editable-cells-table",showGridlines:"",scrollable:!0,scrollHeight:"600px",responsiveLayout:"scroll",dataKey:"id",rows:10,rowsPerPageOptions:[10,20,50],paginator:!0,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",currentPageReportTemplate:"Mostrando del {first} al {last} de {totalRecords}",filters:r.filters,"onUpdate:filters":t[2]||(t[2]=function(e){return r.filters=e}),filterDisplay:"menu",globalFilterFields:["agent_full_name","agent_penalty","representative.name"],editMode:"cell",onCellEditComplete:c.onCellEditComplete},{header:Object(a["O"])((function(){return[Object(a["j"])("div",T,[Object(a["m"])(s,{type:"button",icon:"pi pi-filter-slash",label:e.$t("clean_object",{object:"filtros"}),class:"p-button-outlined",onClick:t[0]||(t[0]=function(e){return c.clearFilter()})},null,8,["label"]),Object(a["j"])("span",D,[F,Object(a["m"])(l,{modelValue:r.filters["global"].value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.filters["global"].value=e}),icon:"pi pi-check",placeholder:e.$t("find_by",{field:e.$t("name")})},null,8,["modelValue","placeholder"])])])]})),empty:Object(a["O"])((function(){return[Object(a["l"])(Object(a["I"])(e.$t("pages.add_agents_to_campaign.empty_agents")),1)]})),loading:Object(a["O"])((function(){return[Object(a["l"])(Object(a["I"])(e.$t("pages.add_agents_to_campaign.load_info")),1)]})),default:Object(a["O"])((function(){return[Object(a["m"])(o,{field:"agent_full_name",header:e.$t("agent_campaign.name")},null,8,["header"]),Object(a["m"])(o,{field:"agent_username",header:e.$t("agent_campaign.username")},null,8,["header"]),Object(a["m"])(o,{field:"agent_sip_id",header:e.$t("agent_campaign.sip"),sortable:!0},null,8,["header"]),Object(a["m"])(o,{field:"agent_penalty",header:e.$t("agent_campaign.penalty"),sortable:!0},{editor:Object(a["O"])((function(t){var n=t.data,i=t.field;return[Object(a["m"])(u,{modelValue:n[i],"onUpdate:modelValue":function(e){return n[i]=e},options:r.penalties,optionLabel:"label",optionValue:"value",placeholder:e.$t("pages.add_agents_to_campaign.select_type",{type:"penalty"})},{option:Object(a["O"])((function(e){return[Object(a["j"])("span",null,Object(a["I"])(e.option.label),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","options","placeholder"])]})),_:1},8,["header"]),Object(a["m"])(o,{header:e.$tc("option"),exportable:!1,style:{"min-width":"8rem"}},{body:Object(a["O"])((function(t){return[Object(a["j"])("div",R,[Object(a["P"])(Object(a["m"])(s,{icon:"pi pi-trash",class:"p-button-danger",onClick:function(e){return c.removeAgent(t.data.agent_id)}},null,8,["onClick"]),[[p,e.$t("pages.add_agents_to_campaign.delete_agent"),void 0,{top:!0}]])])]})),_:1},8,["header"])]})),_:1},8,["value","filters","globalFilterFields","onCellEditComplete"])])}var L=n("0393"),U={data:function(){return{filters:null,penalties:[{label:0,value:0},{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5},{label:6,value:6},{label:7,value:7},{label:8,value:8},{label:9,value:9}]}},created:function(){this.initFilters()},mounted:function(){},methods:m({clearFilter:function(){this.initFilters()},initFilters:function(){this.filters={global:{value:null,matchMode:L["a"].CONTAINS}}},removeAgent:function(e){this.removeAgentOfCampaign(e),this.$swal(w(this.$t("sweet_alert.title.success"),this.$t("pages.add_agents_to_campaign.agent_deleted_success"),this.$t("sweet_alert.icons.success")))},onCellEditComplete:function(e){var t=e.data,n=e.newValue;this.updateAgentPenalty({agent_id:t["agent_id"],penalty:n})}},Object(_["b"])(["removeAgentOfCampaign","updateAgentPenalty"])),computed:m({},Object(_["c"])(["agents_by_campaign"]))};const z=A()(U,[["render",I]]);var M=z,N={components:{AgentsCampaignTable:M,AddGroupAgents:B,AddAgents:x},data:function(){return{campaign_id:null}},created:function(){var e=window.parent.document.getElementById("add_agents_to_campaign");this.campaign_id=e.value,this.agentsCampaignService=new v["a"],this.initAgentsCampaign(this.campaign_id),this.initActiveAgents(),this.initGroups()},methods:m(m({},Object(_["b"])(["initAgentsCampaign","initActiveAgents","initGroups"])),{},{updateAgents:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var n,a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.agents_by_campaign.map((function(e){return{agent_id:e["agent_id"],agent_penalty:e["agent_penalty"]}}));case 2:if(n=t.sent,0!=e.agents_by_campaign.length){t.next=7;break}e.$swal({title:e.$t("sweet_alert.title.sure"),text:e.$t("pages.add_agents_to_campaign.empty_campaign_notice"),icon:e.$t("sweet_alert.icons.warning"),showCancelButton:!0,confirmButtonText:e.$t("actions.yes"),cancelButtonText:e.$t("actions.no"),backdrop:!1,reverseButtons:!0}).then(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var i,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.isConfirmed){t.next=15;break}return t.next=3,e.agentsCampaignService.updateAgentsByCampaign({campaign_id:e.campaign_id,agents:n});case 3:if(i=t.sent,r=i.status,c=i.ok,200!=r||1!=c){t.next=12;break}return t.next=9,e.initAgentsCampaign(e.campaign_id);case 9:e.$swal(w(e.$t("sweet_alert.title.success"),e.$t("pages.add_agents_to_campaign.agents_added_success"),e.$t("sweet_alert.icons.success"))),t.next=13;break;case 12:e.$swal(w(e.$t("sweet_alert.title.error"),e.$t("pages.add_agents_to_campaign.agents_added_error"),e.$t("sweet_alert.icons.error")));case 13:t.next=16;break;case 15:a.dismiss===e.$swal.DismissReason.cancel&&e.$swal(w(e.$t("actions.cancelled"),e.$t("pages.add_agents_to_campaign.agents_not_save"),e.$t("sweet_alert.icons.error")));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=19;break;case 7:return t.next=9,e.agentsCampaignService.updateAgentsByCampaign({campaign_id:e.campaign_id,agents:n});case 9:if(a=t.sent,i=a.status,r=a.ok,200!=i||1!=r){t.next=18;break}return t.next=15,e.initAgentsCampaign(e.campaign_id);case 15:e.$swal(w(e.$t("sweet_alert.title.success"),e.$t("pages.add_agents_to_campaign.agents_added_success"),e.$t("sweet_alert.icons.success"))),t.next=19;break;case 18:e.$swal(w(e.$t("sweet_alert.title.error"),e.$t("pages.add_agents_to_campaign.agents_added_error"),e.$t("sweet_alert.icons.error")));case 19:case"end":return t.stop()}}),t)})))()}}),computed:m({},Object(_["c"])(["campaign","agents_by_campaign"]))};const J=A()(N,[["render",p]]);t["default"]=J},"7db0":function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").find,r=n("44d2"),c="find",s=!0;c in[]&&Array(1)[c]((function(){s=!1})),a({target:"Array",proto:!0,forced:s},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(c)},a15b:function(e,t,n){"use strict";var a=n("23e7"),i=n("e330"),r=n("44ad"),c=n("fc6a"),s=n("a640"),l=i([].join),o=r!=Object,u=s("join",",");a({target:"Array",proto:!0,forced:o||!u},{join:function(e){return l(c(this),void 0===e?",":e)}})},a640:function(e,t,n){"use strict";var a=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))}},b0c0:function(e,t,n){var a=n("83ab"),i=n("5e77").EXISTS,r=n("e330"),c=n("9bf2").f,s=Function.prototype,l=r(s.toString),o=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=r(o.exec),d="name";a&&!i&&c(s,d,{configurable:!0,get:function(){try{return u(o,l(this))[1]}catch(e){return""}}})},b64b:function(e,t,n){var a=n("23e7"),i=n("7b0b"),r=n("df75"),c=n("d039"),s=c((function(){r(1)}));a({target:"Object",stat:!0,forced:s},{keys:function(e){return r(i(e))}})},d81d:function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").map,r=n("1dde"),c=r("map");a({target:"Array",proto:!0,forced:!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,n){var a=n("23e7"),i=n("83ab"),r=n("56ef"),c=n("fc6a"),s=n("06cf"),l=n("8418");a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,a=c(e),i=s.f,o=r(a),u={},d=0;while(o.length>d)n=i(a,t=o[d++]),void 0!==n&&l(u,t,n);return u}})},e439:function(e,t,n){var a=n("23e7"),i=n("d039"),r=n("fc6a"),c=n("06cf").f,s=n("83ab"),l=i((function(){c(1)})),o=!s||l;a({target:"Object",stat:!0,forced:o,sham:!s},{getOwnPropertyDescriptor:function(e,t){return c(r(e),t)}})}}]);
//# sourceMappingURL=chunk-62cb345b.7de54804.js.map