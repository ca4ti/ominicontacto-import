<!--
Copyright (C) 2018 Freetech Solutions

This file is part of OMniLeads

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see http://www.gnu.org/licenses/.

-->
{% extends "campanas/wizard_base.html" %}
{% load i18n %}
{% load static %}

{% block nav %}
    <h1>{{ titulo }}</h1>

    <ul class="nav nav-indicators">
    	{% if wizard.steps.current == '0' %}
	        <li class="active"><a>{% trans 'Datos Básicos' %}</a></li>
	        <li class="disabled"><a>{% trans 'Perfil' %}</a></li>
        {% else %}
	        <li class="disabled"><a>{% trans 'Datos Básicos' %}</a></li>
	        <li class="active"><a>{% trans 'Perfil' %}</a></li>
    	{% endif %}
    </ul>
{% endblock %}

{% block form_render %}
	{% include "base_form_fields.html" with form=form %}
    {% if AGENTE_ROL_ID %}
    <script>
        $(function () {
            var email_field = $("#id_0-email");
            var email_label = email_field.prev("label");
            email_label.html(email_label.text().replace('*', '').trim() + '<b class="hidden" style="color:red"> *</b>');
            var rol_select = $("#id_0-rol");
            rol_select.change(on_rol_select_change);
            function on_rol_select_change() {
                if (rol_select.val() == {{ AGENTE_ROL_ID }}) {
                    email_field.prop("required", true);
                    email_label.children("b").removeClass("hidden");
                } else {
                    email_field.prop("required", false);
                    email_label.children("b").addClass("hidden");
                }
            }
            on_rol_select_change();
        });
	</script>
    {% endif %}
{% endblock %}
